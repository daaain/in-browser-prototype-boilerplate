<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Prototype</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.1.1/foundation-flex.css">
    <script src="https://fb.me/react-with-addons-0.14.6.js" type="text/javascript"></script>
    <script src="https://fb.me/react-dom-0.14.6.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.24/browser.js" type="text/javascript"></script>
    <script src="https://cdn.rawgit.com/chriszarate/sheetrock/master/src/sheetrock.js"></script>
  </head>
  <body id="body">

    <div id="proto"></div>

    <script type="text/babel">
      let HelloTable = (props) => {
        let injectTableMarkup = () => ({__html: props.sheetsData.html});
        return (
          <div>
            <h2>Prototyping awesomeness</h2>
            <table>
              <thead>
                <tr>
                  {props.sheetsData.rows[0].cellsArray.map((cell, index, array) => {
                    return <th key={index}>{cell}</th>;
                  })}
                </tr>
              </thead>
              <tbody dangerouslySetInnerHTML={injectTableMarkup()}>
              </tbody>
            </table>
          </div>
        );
      };

      function handleSpreadsheetData(error, options, response) {
        console.log('Sheetrock:', error, options, response);
        ReactDOM.render(
          <HelloTable sheetsData={response} />,
          document.getElementById('proto')
        );
      }

      sheetrock({
        url: 'https://docs.google.com/spreadsheets/d/1Gn50ovdLMMv_uoMevojl46BZbliaLolgZDtHD1FIpOs/edit#gid=0',
        callback: handleSpreadsheetData
      });
    </script>
  </body>
</html>
