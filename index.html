<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Prototype</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.1.1/foundation-flex.css">
    <script src="https://fb.me/react-with-addons-0.14.6.js" type="text/javascript"></script>
    <script src="https://fb.me/react-dom-0.14.6.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.24/browser.js" type="text/javascript"></script>
    <script src="https://cdn.rawgit.com/chriszarate/sheetrock/master/src/sheetrock.js"></script>
  </head>
  <body>
    <script type="text/babel">
      let HelloTable = (props) => {
        let injectTableMarkup = () => ({__html: props.sheetsData.html});
        return (
          <div>
            <table className="stacked">
              <thead>
                <tr>
                  {props.sheetsData.rows[0].cellsArray.map((cell, index, array) => {
                    return <th key={index}>{cell}</th>;
                  })}
                </tr>
              </thead>
              <tbody dangerouslySetInnerHTML={injectTableMarkup()}>
              </tbody>
            </table>
          </div>
        );
      };
      function handleSpreadsheetData(error, options, response) {
        console.log('Sheetrock', 'error', error, 'options', options, 'response', response);
        ReactDOM.render(
          <HelloTable sheetsData={response} />,
          document.getElementById('proto')
        );
      }
      window.loadSpreadsheetData = () => {
        sheetrock({
          url: 'https://docs.google.com/spreadsheets/d/1Gn50ovdLMMv_uoMevojl46BZbliaLolgZDtHD1FIpOs/edit#gid=0',
          callback: handleSpreadsheetData
        });
      }
    </script>
    <h1>Prototyping awesomeness</h1>
    <button class="button" type="button" onclick="loadSpreadsheetData();">Load spreadsheet data</button>
    <div id="proto"></div>
  </body>
</html>